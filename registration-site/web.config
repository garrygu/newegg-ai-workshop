<?xml version="1.0" encoding="UTF-8"?>
<!--
    IIS Web.config for Newegg AI Workshop Registration Site
    
    This file configures IIS settings for the static website.
    Place this file in the root of your deployed site (same folder as index.html).
-->
<configuration>
  <system.webServer>
    <!-- Default Document -->
    <defaultDocument>
      <files>
        <clear />
        <add value="index.html" />
      </files>
    </defaultDocument>
    
    <!-- Directory Browsing (disabled for security) -->
    <directoryBrowse enabled="false" />
    
    <!-- Static Content Compression -->
    <httpCompression>
      <staticTypes>
        <add mimeType="text/*" enabled="true" />
        <add mimeType="message/*" enabled="true" />
        <add mimeType="application/javascript" enabled="true" />
        <add mimeType="application/json" enabled="true" />
        <add mimeType="*/*" enabled="false" />
      </staticTypes>
    </httpCompression>
    
    <!-- URL Rewrite Rules (optional - for clean URLs) -->
    <rewrite>
      <rules>
        <!-- Redirect HTTP to HTTPS (uncomment if using SSL) -->
        <!--
        <rule name="Redirect to HTTPS" stopProcessing="true">
          <match url="(.*)" />
          <conditions>
            <add input="{HTTPS}" pattern="^OFF$" />
          </conditions>
          <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" redirectType="Permanent" />
        </rule>
        -->
        
        <!-- Remove trailing slashes -->
        <rule name="Remove trailing slash" stopProcessing="true">
          <match url="(.*)/$" />
          <conditions>
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
          </conditions>
          <action type="Redirect" url="{R:1}" redirectType="Permanent" />
        </rule>
      </rules>
    </rewrite>
    
    <!-- Security Headers -->
    <httpProtocol>
      <customHeaders>
        <!-- Prevent MIME type sniffing -->
        <add name="X-Content-Type-Options" value="nosniff" />
        
        <!-- Prevent clickjacking -->
        <add name="X-Frame-Options" value="SAMEORIGIN" />
        
        <!-- XSS Protection -->
        <add name="X-XSS-Protection" value="1; mode=block" />
        
        <!-- Referrer Policy -->
        <add name="Referrer-Policy" value="strict-origin-when-cross-origin" />
        
        <!-- Content Security Policy (adjust as needed) -->
        <!--
        <add name="Content-Security-Policy" value="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://www.google.com https://www.gstatic.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:;" />
        -->
      </customHeaders>
    </httpProtocol>
    
    <!-- MIME Types (ensure these are configured) -->
    <staticContent>
      <mimeMap fileExtension=".json" mimeType="application/json" />
      <mimeMap fileExtension=".woff" mimeType="application/font-woff" />
      <mimeMap fileExtension=".woff2" mimeType="application/font-woff2" />
      <mimeMap fileExtension=".svg" mimeType="image/svg+xml" />
    </staticContent>
    
    <!-- Error Pages -->
    <httpErrors errorMode="Custom" existingResponse="Replace">
      <remove statusCode="404" />
      <error statusCode="404" path="/index.html" responseMode="ExecuteURL" />
    </httpErrors>
    
    <!-- Request Filtering (security) -->
    <security>
      <requestFiltering>
        <!-- Maximum request length (10MB) -->
        <requestLimits maxAllowedContentLength="10485760" />
      </requestFiltering>
    </security>
  </system.webServer>
</configuration>



